{% extends 'base.html' %}

{% block title %}
  {{ block.super }}
{% endblock %}

{% block breadcrumb %}
  <li class="breadcrumb-item"><a href="{% url 'home' %}">Conversations</a></li>
  <li class="breadcrumb-item"><a href="{% url 'schedule' %}"> Schedule </a></li>
  <li class="breadcrumb-item active"> Meetups on {{ day }} </li>
{% endblock %}

{% block content %}
<div class="boxed" style="border-color: lightblue; background-color: rgba(255, 255, 255, .85); float: center; padding-left: 2%; border-radius: 25px; padding-top: 2%; padding-bottom: 2%">
<h4> {{ day }}'s meetups </h4>
{% if number_meetups == 1 %}
  <p style="font-size: 13px; font-color: darkgrey; weight: 400%;"> There is one meetup on {{ day }}. </p>
{% endif %}

{% if number_meetups == 0 %}
  <p style="font-size: 13px; font-color: darkgrey; weight: 400%;"> Nobody has posted any meetups on {{ day }}. </p>
  <a href = "{% url 'new_meetup' %}" class="btn btn-success btn-sm" style="margin-top: 0%; margin-bottom: 0%; margin-left: 0%; color: white; font-weight: 400; padding: .5% .5%"> Post a new meetup </a>
{% endif %}

{% if number_meetups > 1 %}
  <p style="font-size: 13px; font-color: darkgrey; weight: 400%;"> There are {{ number_meetups }} meetups on {{ day }}. </p>
{% endif %}

{% if meetups|length > 0 %}
{% for meetup in meetups %}
<div class="card" style="margin-bottom: 2%; margin-right: 2%;">
    <div class="card-header text-center" style="font-size: 30px; font-weight: 500; padding-top: .1%; padding-bottom: .1%; margin-bottom: 0%;"> {{ meetup }} </div>
    <div class="card-deck">
      <div class="card" style="margin-top: 1%; margin-bottom: 1%; margin-left: 3%; margin-right: 3%; padding-left: .5%; padding-right: .5%;">
        <div class="card-title text-center" style="font-size: 20px; font-weight: 600; margin-bottom: 0%;">
          Details
        </div>
      <div class="card-body text-center" style="margin-top: 0%; padding-top: 0%;">
        <div class="card-text" style="font-size: 15px; font-weight: 500; margin-top: 0%; margin-bottom: 3%;">
          Started by {{ meetup.starter }}
        </div>

        <div class="card-text" style="font-size: 15px; font-weight: 300; margin-top: 0%; margin-bottom: 0%;">
          Time: {{ meetup.start_time }} - {{ meetup.end_time }} on {{ day }}
        </div>
      <div class="card-text" style="font-size: 15px; font-weight: 300; margin-top: 0%; margin-bottom: 0%;">
         Happening at: {{ meetup.location }}
      </div>
      <div class="card-text" style="font-size: 15px; font-weight: 300; margin-top: 0%; margin-bottom: 0%;">
         Number of people going: [filler value]
      </div>
      <div class="card-text" style="font-size: 15px; font-weight: 300; margin-top: 0%; margin-bottom: 0%;">
          Number of views: {{ meetup.views }}
      </div>
    </div>
    </div>

    <div class="card" style="margin-top: 3%; margin-bottom: 1%; margin-left: 0%; margin-right: 0%; padding-left: .5%; padding-right: .5%; border: transparent;">
    <div class="card-body text-center" style="margin-top: 0%; padding-top: 0%;">
      <a href="{% url 'meetup_details' meetup.pk %}" class="btn btn-info" style="margin-top: 5%;"> See full details + more discussions </a>
      {% if currUser not in meetup.members.all %}
      <a href="{% url 'join_meetup' meetup.pk %}" class="btn btn-success" style="margin-top: 5%; font-weight: 700"> Join this meetup </a>
      {% endif %}

      {% if currUser in meetup.members.all %}
      <a href="{% url 'leave_meetup' meetup.pk %}" class="btn btn-danger" style="margin-top: 5%; font-weight: 700"> Leave this meetup </a>
      {% endif %}

    </div>
    </div>

    <div class="card" style="margin-top: 1%; margin-bottom: 1%; margin-left: 3%; margin-right: 3%; padding-left: .5%; padding-right: .5%;">
      <div class="card-title text-center" style="font-size: 20px; font-weight: 600;">
        Topics of discussion
      </div>


    <div class="card-body text-center" style="margin-top: 0%; padding-top: 0%;">
    {% if meetup.meetup_topics.all|length > 4 %}
      {% for i in '01234'|make_list %}
        <div class="card bg-primary">
          <div class="card-header">'
            {{ meetup.meetup_topics.all }}
          </div>
        </div>
      {% endfor %}
      {% endif %}

    {% if meetup.meetup_topics.all|length <= 4 and meetup.meetup_topics.all|length != 0 %}

      {% for topic in meetup.meetup_topics.all %}
      <div class="card bg-primary" style="margin-bottom: 1%;">
        <a href="{% url 'meetup_topic_posts' meetup.pk topic.pk %}" class="btn btn-primary"> {{ topic }} </a>
      </div>
      {% endfor %}
    {% endif %}

    {% if meetup.meetup_topics.all|length == 0 %}
      <p> There aren't any topics of discussion posted. </p>
      <p> Click "See full info" to ask a question. </p>
    {% endif %}

    </div>


  </div>

</div>
</div>
{% endfor %}
{% endif %}

</div>
{% endblock %}
